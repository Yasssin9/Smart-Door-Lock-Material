var ezVideoAnalytics=function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=9)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var a=i(5);function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var a=i(5);e.exports=function(e,t,i){return(t=a(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function i(t){return e.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,i(t)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var a=i(8)();e.exports=a;try{regeneratorRuntime=a}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},function(e,t,i){var a=i(3).default,n=i(7);e.exports=function(e){var t=n(e,"string");return"symbol"===a(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function i(e,t,i,a,n,s,r){try{var d=e[s](r),o=d.value}catch(e){return void i(e)}d.done?t(o):Promise.resolve(o).then(a,n)}e.exports=function(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var r=e.apply(t,a);function d(e){i(r,n,s,d,o,"next",e)}function o(e){i(r,n,s,d,o,"throw",e)}d(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var a=i(3).default;e.exports=function(e,t){if("object"!==a(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var a=i(3).default;function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=n=function(){return i},e.exports.__esModule=!0,e.exports.default=e.exports;var t,i={},s=Object.prototype,r=s.hasOwnProperty,d=Object.defineProperty||function(e,t,i){e[t]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function v(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{v({},"")}catch(t){v=function(e,t,i){return e[t]=i}}function c(e,t,i,a){var n=t&&t.prototype instanceof m?t:m,s=Object.create(n.prototype),r=new M(a||[]);return d(s,"_invoke",{value:x(e,i,r)}),s}function y(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}i.wrap=c;var _="suspendedStart",p="executing",f="completed",g={};function m(){}function D(){}function k(){}var A={};v(A,l,(function(){return this}));var P=Object.getPrototypeOf,b=P&&P(P(S([])));b&&b!==s&&r.call(b,l)&&(A=b);var E=k.prototype=m.prototype=Object.create(A);function w(e){["next","throw","return"].forEach((function(t){v(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function i(n,s,d,o){var l=y(e[n],e,s);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==a(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,d,o)}),(function(e){i("throw",e,d,o)})):t.resolve(h).then((function(e){u.value=e,d(u)}),(function(e){return i("throw",e,d,o)}))}o(l.arg)}var n;d(this,"_invoke",{value:function(e,a){function s(){return new t((function(t,n){i(e,a,t,n)}))}return n=n?n.then(s,s):s()}})}function x(e,i,a){var n=_;return function(s,r){if(n===p)throw new Error("Generator is already running");if(n===f){if("throw"===s)throw r;return{value:t,done:!0}}for(a.method=s,a.arg=r;;){var d=a.delegate;if(d){var o=z(d,a);if(o){if(o===g)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===_)throw n=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=p;var l=y(e,i,a);if("normal"===l.type){if(n=a.done?f:"suspendedYield",l.arg===g)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(n=f,a.method="throw",a.arg=l.arg)}}}function z(e,i){var a=i.method,n=e.iterator[a];if(n===t)return i.delegate=null,"throw"===a&&e.iterator.return&&(i.method="return",i.arg=t,z(e,i),"throw"===i.method)||"return"!==a&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+a+"' method")),g;var s=y(n,e.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,g;var r=s.arg;return r?r.done?(i[e.resultName]=r.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,g):r:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function S(e){if(e||""===e){var i=e[l];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function i(){for(;++n<e.length;)if(r.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i};return s.next=s}}throw new TypeError(a(e)+" is not iterable")}return D.prototype=k,d(E,"constructor",{value:k,configurable:!0}),d(k,"constructor",{value:D,configurable:!0}),D.displayName=v(k,h,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===D||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,v(e,h,"GeneratorFunction")),e.prototype=Object.create(E),e},i.awrap=function(e){return{__await:e}},w(C.prototype),v(C.prototype,u,(function(){return this})),i.AsyncIterator=C,i.async=function(e,t,a,n,s){void 0===s&&(s=Promise);var r=new C(c(e,t,a,n),s);return i.isGeneratorFunction(t)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},w(E),v(E,h,"Generator"),v(E,l,(function(){return this})),v(E,"toString",(function(){return"[object Generator]"})),i.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},i.values=S,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function a(a,n){return d.type="throw",d.arg=e,i.next=a,n&&(i.method="next",i.arg=t),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],d=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var o=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var n=a;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=e,s.arg=t,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),T(i),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var a=i.completion;if("throw"===a.type){var n=a.arg;T(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,a){return this.delegate={iterator:S(e),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=t),g}},i}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){"use strict";i.r(t),i.d(t,"NewAnalyticsPlayer",(function(){return B})),i.d(t,"NewVideoAdInitializer",(function(){return R}));var a=i(0),n=i.n(a),s=i(1),r=i.n(s),d=function(){function e(t,i,a,s){if(n()(this,e),this.videoPlayer_=t,google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(a),google.ima.settings.setNumRedirects(8),i.VideoPlaylist){this.videoAdContainerId="ez-video-ad-container-"+i.VideoPlaylist.VideoPlaylistId;i.VideoPlaylist.VideoPlaylistId}else{this.videoAdContainerId="ez-video-ad-container-"+i.VideoContentId;i.VideoContentId}google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.adDisplayContainer_=new google.ima.AdDisplayContainer(document.getElementById(this.videoAdContainerId),this.videoPlayer_.getVideoElement()),this.adsLoader_=new google.ima.AdsLoader(this.adDisplayContainer_),this.adsManager_=null,this.containerInitialized=!1,i.IsAutoPlay&&(s.autoplay_allowed||s.autoplay_allowed_muted)&&this.initializeContainer()}return r()(e,[{key:"initializeContainer",value:function(){this.containerInitialized=!0,this.adDisplayContainer_.initialize()}},{key:"isContainerInitialized",value:function(){return this.containerInitialized}},{key:"attachAdEventListener",value:function(e,t,i){this.adsLoader_.addEventListener(e,t,!1,i)}}]),e}(),o=i(2),l=i.n(o);function u(e){for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),a=0;a<i.length;a++){for(var n=i[a];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""}function h(){var e,t={};return"undefined"!=typeof videoID&&(t.content_id=videoID),"undefined"!=typeof title&&(t.video_title=title),t.uuid=(e=(new Date).getTime(),e+=performance.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)}))),t.total_play_time=0,t.play_cnt=0,t.pause_cnt=0,t.ad_cnt=0,t.seek_time=0,t.completed=!1,t.errored=!1,t.removed=!1,t.muted=!1,t}function v(e){if(!e||0===Object.keys(e).length)return!1;if("undefined"!=typeof _ezaq&&_ezaq.domain_id){var t=_ezaq.domain_id;if(e.DomainIdOwner!==t&&e.DomainIdShare===t)return!0}return!1}function c(){return 1==window._ez_send_requests_outside_humix||window.hasOwnProperty("ezIntType")&&"wp"===window.ezIntType||"undefined"!=typeof _ez_send_requests_through_ezoic&&!0===_ez_send_requests_through_ezoic?"https://g.ezoic.net":window.location.protocol+"//"+document.location.hostname}function y(){if(_()){var e=Array.from(arguments);e.unshift("[Video Ads]"),console.log.apply(console,e)}}function _(){return"1"===new URLSearchParams(window.location.search).get("ez_vid_debug")}function p(e){for(var t=[],i=e;null!==i;)t.push(i.toString()),i="innerError"in i?i.innerError():null;return t.join("; inner error: ").substring(0,256)}var f=function(){function e(t,i,a,s,r,d,o){n()(this,e),this.videoAdManager_=t,this.videoPlayer_=i,this.isPlaylist=r,this.videoObject=d,this.customClickDiv_=document.getElementById("customClick"),this.contentCompleteCalled_=!1,this.isAdRequested=!1,this.isMuted=i.getPlayerMute(),this.isPlaying=!1,this.adUnit=a,this.adsInitializer=s,this.adsLoader_=s.adsLoader_,this.onResizeCallback=this.bind_(this,this.playerResizeHandler),this.adTrackingTimer=null,this.adsLoader_.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded_,!1,this),this.adsLoader_.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError_,!1,this),this.prerollQueued=!1,this.prerollAdsRequest=null,this.adsLoaded=!1,this.setAutoplay(o),this.adsInitializer.isContainerInitialized()||this.waitForInitialUserInteraction()}return r()(e,[{key:"setAutoplay",value:function(e){var t=!1,i=!1;e&&(t=e.autoplay_allowed,i=e.autoplay_allowed_muted),this.autoplayAllowed=this.videoPlayer_.isPlayerAutoplay()&&t,this.autoplayRequiresMuted=this.videoPlayer_.isPlayerAutoplay()&&i}},{key:"waitForInitialUserInteraction",value:function(){this.startEvent="click",(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&(this.startEvent="touchend"),this.initAdDisplayContainer=function(){y("Initializing ad display container after user input"),this.adsInitializer.initializeContainer(),this.videoPlayer_.getVideoContainer().removeEventListener(this.startEvent,this.boundAdDisplayInit),this.adsLoaded&&(y("Starting ads manager"),this.startAdsManager_(this.adsManager_))},this.boundAdDisplayInit=this.initAdDisplayContainer.bind(this),this.videoPlayer_.getVideoContainer().addEventListener(this.startEvent,this.boundAdDisplayInit),y("Waiting for user input to initialize ad display container")}},{key:"attachPlayerResizeEvent",value:function(e){e.on("playerresize",this.onResizeCallback)}},{key:"attachPlayerPlayEvent",value:function(e,t){this.retryAds=function(t){y("player unpaused - retrying ad bidding"),this.retryAdFill(t),e.off("","playing",this.boundRetry)},this.boundRetry=this.retryAds.bind(this,t),e.on("","playing",this.boundRetry)}},{key:"playerResizeHandler",value:function(e){var t=this.videoPlayer_.getVideoDimensions();this.resize(t.width,t.height,!1)}},{key:"bind_",value:function(e,t){return function(){t.apply(e,arguments)}}},{key:"requestAds",value:function(e){if(!this.isAdRequested){this.isMuted=this.videoPlayer_.getPlayerMute(),this.isAdRequested=!0,this.contentCompleteCalled_=!1,this.allAdsCompleted_=!1;var t=new google.ima.AdsRequest;t.adTagUrl=e;var i=this.videoPlayer_.getVideoDimensions();t.linearAdSlotWidth=i.width,t.linearAdSlotHeight=i.height,t.nonLinearAdSlotWidth=i.width,t.nonLinearAdSlotHeight=150,t.vastLoadTimeout=7e3,t.pageUrl=window.location.href,t.contentTitle=this.videoObject.VideoTitle,t.contentDuration=this.videoPlayer_.getVideoLength(),t.setAdWillAutoPlay(this.autoplayAllowed),t.setAdWillPlayMuted(this.autoplayRequiresMuted),"undefined"!=typeof __ezOutstream&&(__ezOutstream.hasOwnProperty("adDisableMute")&&t.setAdWillPlayMuted(Boolean(!__ezOutstream.adDisableMute)),__ezOutstream.hasOwnProperty("adDisableAutoplay")&&t.setAdWillAutoPlay(Boolean(!__ezOutstream.adDisableAutoplay))),this.adsLoader_.requestAds(t)}}},{key:"waitForAdsManager",value:function(e){var t=this,i=setInterval((function(){t.adsManager_&&(clearInterval(i),e())}),1e3)}},{key:"isAdPlaying",value:function(){return this.isPlaying}},{key:"pause",value:function(){this.adsManager_&&(this.adsManager_.pause(),this.isPlaying=!1)}},{key:"resume",value:function(){this.adsManager_&&(this.adsManager_.resume(),this.isPlaying=!0)}},{key:"isAdMuted",value:function(){return this.isMuted}},{key:"mute",value:function(){this.adsManager_&&(this.adsManager_.setVolume(0),this.isMuted=!0)}},{key:"unmute",value:function(){this.adsManager_&&(this.adsManager_.setVolume(1),this.isMuted=!1)}},{key:"setVolume",value:function(e){this.adsManager_&&this.adsManager_.setVolume(e),this.isMuted=0==e}},{key:"resize",value:function(e,t,i){this.adsManager_&&(i?this.adsManager_.resize(e,t,google.ima.ViewMode.FULLSCREEN):this.adsManager_.resize(e,t,google.ima.ViewMode.NORMAL))}},{key:"contentEnded",value:function(){this.contentCompleteCalled_=!0,this.adsManager_&&(this.adsManager_.destroy(),this.adsManager_=null),this.videoAdManager_.videoAdUi.hideUi(),this.adsLoader_.contentComplete()}},{key:"onAdsManagerLoaded_",value:function(e){y("Ad loaded event");var t=new google.ima.AdsRenderingSettings;t.useStyledLinearAds=!1,t.enablePreloading=!0,t.mimeTypes=["video/mp4","video/ogg"],t.loadVideoTimeout=15e3,this.adsManager_=e.getAdsManager(this.videoPlayer_.getVideoElement(),t),this.adsManager_.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError_,!1,this),this.adsManager_.addEventListener(google.ima.AdEvent.Type.LOG,this.onLogEvent_,!1,this),this.adsInitializer.adsManager_=this.adsManager_,this.adsLoaded=!0,this.adsInitializer.isContainerInitialized()&&(y("Ad display container initialized. Starting ads manager."),this.startAdsManager_(this.adsManager_))}},{key:"startAdsManager_",value:function(e){e.isCustomClickTrackingUsed()&&(this.customClickDiv_.style.display="table"),e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested_,!1,this),e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested_,!1,this);var t=[google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.IMPRESSION];for(var i in t)e.addEventListener(t[i],this.onAdEvent_,!1,this);if(this.videoPlayer_.isFullscreen())e.init(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN);else{var a=this.videoPlayer_.getVideoDimensions();e.init(a.width,a.height,google.ima.ViewMode.NORMAL)}this.videoAdManager_.handleStartAd(),e.start()}},{key:"onContentPauseRequested_",value:function(){this.videoAdManager_.pauseForAd(),this.videoAdManager_.setVideoEndedCallbackEnabled(!1)}},{key:"onContentResumeRequested_",value:function(){this.videoAdManager_.setVideoEndedCallbackEnabled(!0),this.videoAdManager_.videoAdUi.hideUi(),this.contentCompleteCalled_&&!this.isPlaylist||this.videoAdManager_.resumeAfterAd(!0)}},{key:"onAdEvent_",value:function(e){switch(y("Ad event: "+e.type),e.type){case google.ima.AdEvent.Type.AD_CAN_PLAY:"undefined"!=typeof ezOutstreamPlayer&&"ez-video-outstream"===this.videoPlayer_.player.player.id_&&ezOutstreamPlayer.RaisePlayer();break;case google.ima.AdEvent.Type.STARTED:this.currentAd=e.getAd(),this.currentAd.isLinear()&&(this.adTrackingTimer=setInterval(this.onAdPlayTracker.bind(this),250)),this.videoAdManager_.videoAdUi.onAdBreakStart(e);break;case google.ima.AdEvent.Type.CLICK:this.videoAdManager_.adClicked();break;case google.ima.AdEvent.Type.LOADED:this.isPlaying=!0,e.getAd().isLinear()||this.onContentResumeRequested_();break;case google.ima.AdEvent.Type.LOG:var t=e.getAdData();t.adError&&console.log("Non-fatal error occurred: "+t.adError.getMessage());break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.isAdRequested=!1,this.isPlaying=!1,this.adsManager_&&(this.adsManager_.destroy(),this.adsManager_=null),this.adTrackingTimer&&clearInterval(this.adTrackingTimer),"undefined"!=typeof ezOutstreamPlayer&&"ez-video-outstream"==this.videoPlayer_.player.player.id_&&(ezOutstreamPlayer.LowerPlayer(),ezOutstreamPlayer.CallNextAdBreak()),this.videoAdManager_.videoAdUi.hideUi(),this.videoAdManager_.videoAdUi.onAdBreakEnd(),this.adsLoader_.contentComplete();break;case google.ima.AdEvent.Type.PAUSED:this.videoAdManager_.videoAdUi.onAdsPaused();break;case google.ima.AdEvent.Type.RESUMED:this.videoAdManager_.videoAdUi.onAdsResumed()}}},{key:"onAdPlayTracker",value:function(){if(null!=this.adsManager_){var e=this.adsManager_.getRemainingTime(),t=this.currentAd.getDuration(),i=t-e;i=i>0?i:0;var a,n=0;this.currentAd.getAdPodInfo()&&(a=this.currentAd.getAdPodInfo().getAdPosition(),n=this.currentAd.getAdPodInfo().getTotalAds()),this.videoAdManager_.videoAdUi.updateAdUi(i,e,t,a,n)}}},{key:"onAdError_",value:function(e){y("Ad error: "+p(e.getError())),this.adsManager_&&this.adsManager_.destroy(),this.videoPlayer_.paused()&&!this.videoAdManager_.isOutstream?(y("player is paused, waiting for unpause to retry ad bidding"),this.attachPlayerPlayEvent(this.videoPlayer_,e)):this.retryAdFill(e)}},{key:"retryAdFill",value:function(e){if(e){var t=this.videoAdManager_.currentAdBreak;if(t){var i=!1,a=e.getError().getErrorCode();1009===a||303===a?i=this.videoAdManager_.retryAdRequest(t):1005===a&&t.retryCount<1&&(t.retryCount++,__ez.vhb.bid(t),i=!0)}if(!i&&this.videoPlayer_)__ez.vhb.biddingComplete(),this.videoPlayer_.attachAdAnalytics(this.adUnit,void 0,this.videoObject).videoAdEventHandler.sendUnfilledVadPixel(t,p(e.getError())),t.isOutstream&&"undefined"!=typeof ezOutstreamPlayer&&(y("ad not filled"),ezOutstreamPlayer.CallNextAdBreak())}else y("Missing ad error event - skipping retry");this.videoAdManager_.videoAdUi.hideUi(),this.isAdRequested=!1,this.isPlaying=!1,this.videoAdManager_.resumeAfterAd(!1)}},{key:"onLogEvent_",value:function(e){var t=e.getAdData();if(t.adError){y("Non-fatal error: "+p(t.adError));var i=this.videoAdManager_.currentAdBreak;if(this.videoPlayer_)this.videoPlayer_.attachAdAnalytics(this.adUnit,void 0,this.videoObject).videoAdEventHandler.sendUnfilledVadPixel(i,p(t.adError))}}}]),e}(),g=function(){function e(t){n()(this,e),l()(this,"player",null),l()(this,"currentAd",null),l()(this,"adContainerDiv",null),l()(this,"controlsDiv",document.createElement("div")),l()(this,"countdownDiv",document.createElement("div")),l()(this,"seekBarDiv",document.createElement("div")),l()(this,"progressDiv",document.createElement("div")),l()(this,"playPauseDiv",document.createElement("div")),l()(this,"muteDiv",document.createElement("div")),l()(this,"sliderDiv",document.createElement("div")),l()(this,"sliderLevelDiv",document.createElement("div")),l()(this,"fullscreenDiv",document.createElement("div")),l()(this,"countdownDiv",document.createElement("div")),l()(this,"boundOnMouseUp",this.onMouseUp.bind(this)),l()(this,"boundOnMouseMove",this.onMouseMove.bind(this)),this.player=t,this.adContainerDiv=t.getAdContainer(),this.adContainerDiv.className="ez-video-ad-container",this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.top="0px",this.adContainerDiv.style.zIndex=9999,this.createUi(),this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1)}return r()(e,[{key:"createUi",value:function(){this.controlsDiv.className="ez-vad-controls",this.controlsDiv.style.width="100%",this.countdownDiv.className="ez-vad-countdown",this.seekBarDiv.className="ez-vad-seek-bar",this.seekBarDiv.style.width="100%",this.progressDiv.className="ez-vad-progress",this.playPauseDiv.classList.add("ez-vad-play-pause","ez-vad-playing"),this.playPauseDiv.addEventListener("click",this.onPlayPauseClick.bind(this),!1),this.muteDiv.classList.add("ez-vad-mute","ez-vad-non-muted"),this.muteDiv.addEventListener("click",this.onMuteClick.bind(this),!1),this.sliderDiv.className="ez-vad-slider",this.sliderDiv.addEventListener("mousedown",this.onVolumeSliderMouseDown.bind(this),!1),(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i))&&(this.sliderDiv.style.display="none"),this.sliderLevelDiv.className="ez-vad-slider-level",this.fullscreenDiv.classList.add("ez-vad-fullscreen","ez-vad-non-fullscreened"),this.fullscreenDiv.addEventListener("click",this.onFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)}},{key:"onPlayPauseClick",value:function(){this.player.adRenderer.togglePlayPause()}},{key:"onMuteClick",value:function(){this.player.adRenderer.toggleMuteUnmute()}},{key:"onFullscreenClick",value:function(){this.player.adRenderer.toggleFullscreen()}},{key:"onAdsPaused",value:function(){this.playPauseDiv.classList.add("ez-vad-paused"),this.playPauseDiv.classList.remove("ez-vad-playing"),this.showAdControls()}},{key:"onAdsResumed",value:function(){this.onAdsPlaying(),this.showAdControls()}},{key:"onAdsPlaying",value:function(){this.playPauseDiv.classList.add("ez-vad-playing"),this.playPauseDiv.classList.remove("ez-vad-paused")}},{key:"updateAdUi",value:function(e,t,i,a,n){var s=Math.floor(t/60),r=Math.floor(t%60);r.toString().length<2&&(r="0"+r);var d=": ";n>1&&(d=" ("+a+" of "+n+"): "),this.countdownDiv.innerHTML="Advertisement"+d+s+":"+r;var o=100*(e/i);this.progressDiv.style.width=o+"%"}},{key:"unmute",value:function(){this.muteDiv.classList.add("ez-vad-non-muted"),this.muteDiv.classList.remove("ez-vad-muted"),this.sliderLevelDiv.style.width=100*this.player.getPlayerVolume()+"%"}},{key:"mute",value:function(){this.muteDiv.classList.add("ez-vad-muted"),this.muteDiv.classList.remove("ez-vad-non-muted"),this.sliderLevelDiv.style.width="0%"}},{key:"onVolumeSliderMouseDown",value:function(){window.addEventListener("mouseup",this.boundOnMouseUp,!1),window.addEventListener("mousemove",this.boundOnMouseMove,!1)}},{key:"onMouseMove",value:function(e){this.changeVolume(e)}},{key:"onMouseUp",value:function(e){this.changeVolume(e),window.removeEventListener("mouseup",this.boundOnMouseUp),window.removeEventListener("mousemove",this.boundOnMouseMove)}},{key:"changeVolume",value:function(e){var t=(e.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth*100;t=Math.min(Math.max(t,0),100),this.sliderLevelDiv.style.width=t+"%",0==t?(this.muteDiv.classList.add("ez-vad-muted"),this.muteDiv.classList.remove("ez-vad-non-muted")):(this.muteDiv.classList.add("ez-vad-non-muted"),this.muteDiv.classList.remove("ez-vad-muted")),this.player.setPlayerVolume(t/100),this.player.adRenderer.ads_.setVolume(t/100)}},{key:"showUi",value:function(){this.adContainerDiv.style.display="block"}},{key:"hideUi",value:function(){this.adContainerDiv.style.display="none"}},{key:"onAdContainerClick",value:function(){this.isAdNonlinear&&this.player.togglePlayPause()}},{key:"reset",value:function(){this.hideUi()}},{key:"onAdError",value:function(){this.hideUi()}},{key:"onAdBreakStart",value:function(e){this.onPlayerVolumeChanged(this.player.getPlayerVolume()),this.showUi(),this.currentAd=e.getAd(),this.controlsDiv.style.display="block",this.onAdsPlaying(),this.hideAdControls()}},{key:"onAdBreakEnd",value:function(){(null==this.currentAd||this.currentAd.isLinear())&&this.hideUi(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""}},{key:"onAllAdsCompleted",value:function(){this.hideUi()}},{key:"onLinearAdStart",value:function(){this.adContainerDiv.classList.remove("ez-bumpable-ad-container"),this.isAdNonlinear=!1}},{key:"onNonLinearAdLoad",value:function(){this.adContainerDiv.style.display="block",this.adContainerDiv.classList.add("bumpable-ima-ad-container"),this.isAdNonlinear=!0}},{key:"onPlayerEnterFullscreen",value:function(){this.fullscreenDiv.classList.add("ez-vad-fullscreened"),this.fullscreenDiv.classList.remove("ez-vad-non-fullscreened")}},{key:"onPlayerExitFullscreen",value:function(){this.fullscreenDiv.classList.add("ez-vad-non-fullscreened"),this.fullscreenDiv.classList.remove("ez-vad-fullscreened")}},{key:"onPlayerVolumeChanged",value:function(e){0==e?(this.muteDiv.classList.add("ez-vad-muted"),this.muteDiv.classList.remove("ez-vad-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.muteDiv.classList.add("ez-vad-non-muted"),this.muteDiv.classList.remove("ez-vad-muted"),this.sliderLevelDiv.style.width=100*e+"%")}},{key:"showAdControls",value:function(){this.controlsDiv.classList.add("ez-vad-controls-showing")}},{key:"hideAdControls",value:function(){this.controlsDiv.classList.remove("ez-vad-controls-showing")}}]),e}(),m=function(){function e(t,i){n()(this,e),this.videoPlayer=t,this.adBreaks=i,this.trackBreaks_=this.bind_(this,this.trackBreaks),this.videoPlayer.onTimeUpdate(this.trackBreaks_)}return r()(e,[{key:"deactivateBreaks",value:function(){this.videoPlayer.offTimeUpdate(this.trackBreaks_)}},{key:"activateBreaks",value:function(){this.videoPlayer.onTimeUpdate(this.trackBreaks_)}},{key:"bind_",value:function(e,t){return function(){t.apply(e,arguments)}}},{key:"trackBreaks",value:function(){var e=this.videoPlayer.getNextAdBreak(this.adBreaks);if(void 0!==e){var t=e.nextBreak,i=e.idx;if(t){var a=this.videoPlayer.getAdBreakTime(t),n=this.videoPlayer.getCurrentVideoTime(),s=__ez.vhb.getBiddingInProcess(),r=this.videoPlayer.paused();if(void 0!==a&&void 0!==n&&!1===s&&!1===r&&a-n<10&&(!t.isTriggered||!1===t.isTriggered)){if(this.adBreaks&&this.adBreaks[i]&&(this.adBreaks[i].isTriggered=!0),__ezInstream.UnfilledCnt>=5)return void y("Hit max unfilled ad request limit - not requesting more ads");__ez.vhb.bid(t)}}}}},{key:"nextOutstreamBreak",value:function(){if(y("outstreamTimer - nextOutstreamBreak called"),"none"!==document.getElementById("ez-video-outstream-wrap").style.display){var e=this.videoPlayer.player.player;e.play_outstream&&__ez.vhb.requestBreaks(e.player_id,e.ezVideoId,e.ads_enabled,e.video_position_id,0,!0,!0)}else y("in nextOutstreamBreak: outstream display is none - not bidding")}}]),e}(),D=function(){function e(t,i,a,s,r,d,o){n()(this,e),l()(this,"currentAdBreak",null),this.videoPlayer_=t,this.playing_=!1,this.adsActive_=!1,this.adsDone_=!1,this.videoAdContainerElement=document.getElementById(s.videoAdContainerId),this.adUnit=i,this.adBreaks=a,this.handleRenderAdEvent_=this.bind_(this,this.handleRenderAdEvent),this.vadTimer=new m(this.videoPlayer_,this.adBreaks),__ez.vhb.addListener("RenderAdBreak",this.handleRenderAdEvent_),this.isOutstream=!1,this.videoAdUi=new g(t),this.ads_=new f(this,this.videoPlayer_,i,s,r,d,o),this.fullscreenChangeCallback_=this.bind_(this,this.onFullscreenChange_),this.videoPlayer_.on(null,"fullscreenchange",this.fullscreenChangeCallback_),this.videoEndedCallback_=this.bind_(this,this.onContentEnded_),this.setVideoEndedCallbackEnabled(!0)}return r()(e,[{key:"requestAds",value:function(e){this.ads_.requestAds(e)}},{key:"handleRenderAdEvent",value:function(e){if(0!=this.isMyAdBreak(e.AdBreak.key)||!0===e.AdBreak.isOutstream){var t=e.AdBreak;this.currentAdBreak=t,"start"===this.currentAdBreak.timeOffset&&"NoFallback"===this.currentAdBreak.videoFallbackType&&(this.videoPlayer_.pause(),console.time("preroll_no_bid")),this.requestAds(t.vastURL)}}},{key:"handleStartAd",value:function(){"start"===this.currentAdBreak.timeOffset&&"NoFallback"===this.currentAdBreak.videoFallbackType&&console.timeEnd("preroll_no_bid")}},{key:"isMyAdBreak",value:function(e){return this.adBreaks.filter((function(t){return t.key===e})).length>0}},{key:"requestAllAds",value:function(e){this.adBreaks=e,this.vadTimer=new m(this.videoPlayer_,this.adBreaks)}},{key:"pauseAd",value:function(){this.ads_.pause(),this.videoAdUi.onAdsPaused()}},{key:"resumeAd",value:function(){this.ads_.resume(),this.videoAdUi.onAdsResumed()}},{key:"isAdPlaying",value:function(){return this.ads_.isAdPlaying()}},{key:"togglePlayPause",value:function(){this.ads_.isAdPlaying()?(this.ads_.pause(),this.videoAdUi.onAdsPaused()):(this.ads_.resume(),this.videoAdUi.onAdsResumed())}},{key:"toggleMuteUnmute",value:function(){this.ads_.isAdMuted()?(this.videoPlayer_.setPlayerVolume(1),this.ads_.unmute(),this.videoAdUi.unmute()):(this.videoPlayer_.setPlayerVolume(0),this.ads_.mute(),this.videoAdUi.mute())}},{key:"toggleFullscreen",value:function(){this.videoPlayer_.toggleFullscreen()}},{key:"setTimeUpdateCallbackEnabled",value:function(e){}},{key:"setVideoEndedCallbackEnabled",value:function(e){e?this.videoPlayer_.registerVideoEndedCallback(this.videoEndedCallback_):this.videoPlayer_.removeVideoEndedCallback(this.videoEndedCallback_)}},{key:"resumeAfterAd",value:function(e){this.currentAdBreak=null,e&&this.videoPlayer_.play(),this.adsActive_=!1;var t=this.videoPlayer_.getVideoContainer().getElementsByClassName("vjs-control-bar");t&&t.length>0&&(t[0].style=null)}},{key:"pauseForAd",value:function(){this.adsActive_=!0,this.playing_=!0,this.videoPlayer_.pause();var e=this.videoPlayer_.getVideoContainer().getElementsByClassName("vjs-control-bar");e&&e.length>0&&(e[0].style.opacity=0)}},{key:"adClicked",value:function(){}},{key:"bind_",value:function(e,t){return function(){t.apply(e,arguments)}}},{key:"onSampleAdTagClick_",value:function(){this.adTagBox_.value=this.adTagUrl_}},{key:"onClick_",value:function(){if(!this.adsDone_)return this.ads_.initialUserAction(),this.videoPlayer_.preloadContent(this.bind_(this,this.loadAds_)),void(this.adsDone_=!0);this.adsActive_?this.playing_?this.ads_.pause():this.ads_.resume():this.playing_,this.playing_=!this.playing_,this.updateChrome_()}},{key:"loadAds_",value:function(){this.videoPlayer_.removePreloadListener()}},{key:"onFullscreenChange_",value:function(){if(this.videoPlayer_.isFullscreen()){var e=this.videoPlayer_.getVideoDimensions();this.ads_.resize(e.width,e.height,!0),this.videoAdUi.onPlayerEnterFullscreen()}else this.ads_.resize(window.screen.width,window.screen.height,!1),this.videoAdUi.onPlayerExitFullscreen()}},{key:"onContentEnded_",value:function(){this.ads_.contentEnded()}},{key:"retryAdRequest",value:function(t){var i=t.bidRetries,a=e.ZERO_BID_HASH,n=0;if(t.retryCount>i||"frontload"===t.videoFallbackType)return!1;if(t.retryCount<=i){var s=this.getNextBid_(t);a=s.hash,n=s.bidValue,void 0!==googletag.companionAds&&void 0!==window.ezVideo&&t.retryCount==i-1&&(googletag.companionAds().setRefreshUnfilledSlots(!0),window.ezVideo.stopCompanionRefresh=!1)}return t.retryCount++,(t=this.updateBidHash_(t,a)).videoAdBidFloor=n,t.origVastURL=t.vastURL,__ez.vhb.bid(t),!0}},{key:"getNextBid_",value:function(t){return void 0===t.videoFallbackHashes||t.retryCount>=t.videoFallbackHashes.length?{hash:e.ZERO_BID_HASH,bidValue:0}:{hash:t.videoFallbackHashes[t.retryCount],bidValue:t.videoFallbackFloors[t.retryCount]}}},{key:"updateBidHash_",value:function(e,t){return e.lastBidHash.includes(",")&&(e.lastBidHash=encodeURIComponent(e.lastBidHash)),t.includes(",")&&(t=encodeURIComponent(t)),e.vastURL=e.vastURL.replace(e.lastBidHash,t),e.lastBidHash=t,e}},{key:"changeBidType_",value:function(e,t){if(e.bidFloorType===t)return e;var i=e.bidFloorType;e.bidFloorType=t;var a=e.vastURL.split("cust_params=");if(2===a.length){var n=a[1].split("ft%3D");if(2===n.length){var s=t.toString()+n[1].substring(i.toString().length),r=n[0]+"ft%3D"+s;e.vastURL=a[0]+"cust_params="+r}}return e}},{key:"enableOutstream",value:function(){this.isOutstream=!0}}],[{key:"ZERO_BID_HASH",get:function(){return"60474211daf1dfd4d90000ea01f56c30"}}]),e}(),k=i(6),A=i.n(k),P=i(4),b=i.n(P),E=function(){function e(t){n()(this,e),t&&"undefined"==typeof __ezInstream?this.__ezPixelObj=__ez.osvaep:this.__ezPixelObj=__ez.vaep}return r()(e,[{key:"addCounts",value:function(e){var t=e.uuid;e.play_cnt>0&&this.__ezPixelObj.Add(t,[new __ezDotData("play_cnt",e.play_cnt)],e),e.pause_cnt>0&&this.__ezPixelObj.Add(t,[new __ezDotData("pause_cnt",e.pause_cnt)],e)}},{key:"addMediaSrc",value:function(e,t,i){this.__ezPixelObj.Add(e,[new __ezDotData("ad_src",t)],i)}},{key:"addSystem",value:function(e,t,i){this.__ezPixelObj.Add(e,[new __ezDotData("ad_system",t)],i)}},{key:"addClient",value:function(e,t,i){this.__ezPixelObj.Add(e,[new __ezDotData("ad_client",t)],i)}},{key:"addStart",value:function(e,t,i){var a=(new Date).toLocaleString("sv",{timeZone:"CST"});this.__ezPixelObj.Add(e,[new __ezDotData("ad_start",a),new __ezDotData("offset_ad_start",t)],i)}},{key:"addCompleted",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("completed",1)],t)}},{key:"addErrored",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("errored",1)],t)}},{key:"addSkipped",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("skipped",1)],t)}},{key:"addClicked",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("clicked",1)],t)}},{key:"addViewed",value:function(e,t,i,a){i=i?1:0,this.__ezPixelObj.Add(e,[new __ezDotData("viewed_"+t,i)],a)}},{key:"addHeard",value:function(e,t,i,a){i=i?1:0,this.__ezPixelObj.Add(e,[new __ezDotData("heard_"+t,i)],a)}},{key:"addViewable",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("viewable",1)],t)}},{key:"addAdBounce",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("ad_bounce",1)],t)}},{key:"addPodData",value:function(e,t,i){this.__ezPixelObj.Add(e,[new __ezDotData("total_ads",t.total_ads),new __ezDotData("ad_length",i)],t)}},{key:"addAdClosed",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("closed",1)],t)}},{key:"fire",value:function(){this.__ezPixelObj.Fire()}}]),e}();var w=function(){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;n()(this,e),this.isOutstream=i.includes("outstream"),this.currentAdBreak=t.adRenderer.currentAdBreak,this.adPixels=new E(this.isOutstream),_ezaq.hasOwnProperty(["visit_uuid"])?this.visit_uuid=_ezaq.visit_uuid:this.visit_uuid=u("ezovuuid_"+_ezaq.domain_id),this.vadStoreURL=c()+(this.isOutstream?"/porpoiseant/osvad.gif":"/porpoiseant/vad.gif"),this.player=t,this.adUnit=i,this.videoContentShare=a,this.paused=!1,this.firstViewable=null,this.videoObject=s,this.adData={},this.loadedData={},this.adPodVaID="",this.cumulativeAdLength=0,this.unloadAllCallback=this.bind_(this,this.unloadAll),this.adBounceCallback=this.bind_(this,this.handleAdBounce),this.isOutstream&&this.bind_(this,this.attachOutstreamPlayerEvent)(),ez_attachEvent(document,"blur",this.unloadAllCallback),ez_attachEvent(window,"beforeunload",this.unloadAllCallback),ez_attachEvent(window,"blur",this.unloadAllCallback),ez_attachEvent(window,"pagehide",this.unloadAllCallback),ez_attachEvent(window,"unload",this.unloadAllCallback)}var t;return r()(e,[{key:"bind_",value:function(e,t){return function(){t.apply(e,arguments)}}},{key:"initAdImpression",value:function(){y("Getting ad data for player"),this.adData.url=_ezaq.url,this.adData.pageview_id=_ezaq.page_view_id,_ezaq.hasOwnProperty(["visit_uuid"])?this.adData.visit_uuid=_ezaq.visit_uuid:this.adData.visit_uuid=u("ezovuuid_"+_ezaq.domain_id),this.adData.template_id=_ezaq.template_id,this.adData.domain_id=_ezaq.domain_id,this.adData.vab_test_id=_ezaq.ab_test_id,""===this.adPodVaID?this.adData.video_ad_impression_id=this.generateUUID():this.adData.video_ad_impression_id=this.adPodVaID,this.generateInitAdData(this.adData.video_ad_impression_id),this.adData.ad_position="start",this.player.analytics&&!this.isOutstream&&(this.adData.video_impression_id=this.player.analytics.getVideoImpressionUUID()),this.adData.ad_client="Google IMA",this.adData.ad_system="Google Ad Manager",this.adData.ad_index=1,this.currentAdBreak.isOutstream?(this.adData.generic_instream=!1,this.adData.ad_index=__ezOutstream.AdIndex,__ezOutstream.AdIndex+=1):this.adData.generic_instream=__ezInstream.genericInstream,this.videoContentShare&&Object.keys(this.videoContentShare).length>0&&v(this.videoContentShare)&&(this.adData.owner_domain_id=this.videoContentShare.DomainIdOwner),this.videoContentShare&&Object.keys(this.videoContentShare).length>0&&(this.adData.humix_channel_id=this.videoContentShare.HumixChannelId),this.adData.player_name=this.player.playerDef,this.currentAdBreak.isOutstream?(this.adData.is_outstream=!0,this.adData.float_pos=this.currentAdBreak.floatPosition):this.adData.is_outstream=!1,this.adData.cnx_backfill=this.currentAdBreak.cnx_backfill}},{key:"generateInitAdData",value:function(e){this.adData.uuid=e,this.adData.play_cnt=0,this.adData.pause_cnt=0,this.adData.completed=!1,this.adData.errored=!1,this.adData.skipped=!1,this.adData.clicked=!1,this.adData.viewable=!1}},{key:"generateUUID",value:function(){var e=(new Date).getTime();return e+=performance.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)}))}},{key:"unloadAll",value:function(){this.adPixels.addCounts(this.adData),this.adPixels.fire()}},{key:"handleAdLoad",value:function(e){var t=e.getAdData();this.loadedData=t}},{key:"handleQuartileEvent",value:function(e){var t;switch(e.type){case"firstQuartile":t="first_quartile";break;case"midpoint":t="middle";break;case"thirdQuartile":t="third_quartile";break;default:return void y("Could not find quartile for type =",e.type)}this.loadedData.position;var i=this.player.getPlayerViewable()?1:0,a=(this.player.getPlayerVolume(this)>=10&&this.player.getPlayerMute(this),this.adData.uuid);this.adPixels.addViewed(a,t,i)}},{key:"handleInitialTime",value:(t=A()(b.a.mark((function e(t){var i,a,n,s,r,d,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.adData={ad_filled:1},!0===this.isOutstream&&"undefined"==typeof __ezInstream?__ezOutstream.UnfilledCnt=0:__ezInstream.UnfilledCnt=0,this.initAdImpression(),this.adSystem="","function"==typeof t.getAd&&("function"==typeof t.getAd().getDuration&&(this.adData.ad_length=t.getAd().getDuration()||0,this.cumulativeAdLength+=this.adData.ad_length),"function"==typeof t.getAd().getAdSystem&&(this.adSystem=t.getAd().getAdSystem(),this.adData.ad_system=this.adSystem,y("Ad Source (Advertiser name): "+this.adSystem))),i=1,this.currentAdBreak&&t&&"function"==typeof t.getAd&&(a=t.getAd(),n=a.getAdPodInfo(),i=n.getTotalAds(),this.adData.total_ads=n.getAdPosition(),i>1&&1===this.adData.total_ads?(y("AdPods loaded, total_ads:  "+i+"."),this.adPodVaID=this.adData.uuid):1===i&&(this.adPodVaID=""),(s=new google.ima.CompanionAdSelectionSettings).resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.STATIC,s.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.IMAGE,s.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,r=a.getCompanionAds(300,250,s),this.adData.has_companion=r.length>0?1:0,this.currentAdBreak.impressionId=this.currentAdBreak.impressionId,i>1&&this.adData.total_ads>1?this.adPixels.addPodData(this.adData.uuid,this.adData,this.cumulativeAdLength):(this.handleAdBreakData(this.currentAdBreak),this.handleAdImpressionData())),d=this.adData.uuid,o=this.player.getPlayerViewable()?1:0,this.adPixels.addStart(d,this.player.getCurrentVideoTime(),this.adData),this.adPixels.addViewed(d,"start",o),ez_attachEvent(window,"visibilitychange",this.adBounceCallback);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handlePlayEvent",value:function(e){y("Play event triggered for ad "+this.adData.uuid+"."),this.paused=!1,this.adData.play_cnt++}},{key:"handlePauseEvent",value:function(e){y("Pause event triggered for ad "+this.adData.uuid+"."),this.paused=!0,this.firstViewable=null,this.adData.pause_cnt++}},{key:"handleCompleteEvent",value:function(e){if(y("Complete event triggered for ad "+this.adData.uuid+"."),__ez.vhb.biddingComplete(),this.adData.completed)y("Complete event has already completed.");else{var t=this.adData.uuid,i=this.player.getPlayerViewable()?1:0;this.adData.completed=!0,this.adPixels.addCompleted(t,this.adData),this.adPixels.addViewed(t,"end",i),this.unloadAll(),ez_detachEvent(document,"blur",this.unloadAllCallback),ez_detachEvent(window,"beforeunload",this.unloadAllCallback),ez_detachEvent(window,"blur",this.unloadAllCallback),ez_detachEvent(window,"pagehide",this.unloadAllCallback),ez_detachEvent(window,"unload",this.unloadAllCallback),ez_detachEvent(window,"beforeunload",this.adBounceCallback)}}},{key:"handleSkipEvent",value:function(e){if(__ez.vhb.biddingComplete(),y("Skip event triggered for ad "+this.adData.uuid+"."),!this.adData.completed){var t=document.getElementById("adContainer");t&&(t.style.display="none"),this.adData.completed=!0,this.adPixels.addSkipped(this.adData.uuid,this.adData)}}},{key:"handleClickEvent",value:function(e){y("Click event triggered for ad "+this.adData.uuid+"."),this.adData.completed||(this.adData.completed=!0,this.adPixels.addClicked(this.adData.uuid,this.adData))}},{key:"handleLogEvent",value:function(e){var t=e.getAdData();if(t.adError){var i=t.adError;y("adError Type: "+i.getType()),y("adError: ",i),this.adData.uuid&&!this.adData.errored&&(this.adData.errored=!0,this.adPixels.addErrored(this.adData.uuid,this.adData))}}},{key:"handleAdProgressEvent",value:function(e){this.adData.viewable||!this.player.getPlayerViewable()||this.paused?this.firstViewable=null:this.firstViewable?new Date-this.firstViewable>2e3&&(this.adData.viewable=!0,this.adPixels.addViewable(this.adData.uuid,this.adData)):this.firstViewable=new Date}},{key:"handleAdBreakData",value:function(e){this.adData.impression_id=e.impressionId,this.adData.ad_position=e.timeOffset,this.adData.ad_unit=this.adUnit,this.adData.ad_src=e.vastURL,this.adData.param_gen=e.paramGen,this.adData.position_gen=e.positionGen,this.adData.vad_type=e.breakType,this.adData.skippable=e.params&&e.params.skip,void 0!==e.params&&(this.adData.min_ad_length=e.params.min,this.adData.max_ad_length=e.params.max,this.adData.ad_type=e.params.ad_type,this.adData.allowed_ad_sizes=e.params.ad_sizes),this.adData.t_pageview_time=_ezaq.t_epoch,this.adData.stat_source_id=e.statSourceId,this.adData.initial_stat_source_id=e.statSourceId,this.adData.bidders="[".concat(e.bidders,"]"),this.adData.received_bidders="[".concat(e.receivedBidders,"]"),this.adData.prebid_cpm=e.prebidCPM,void 0!==this.player.player.player.video_position_id&&(this.adData.video_position_id=this.player.player.player.video_position_id),this.adData.auction_retry_count=e.retryCount,this.adData.fallback_type=e.videoFallbackType,this.adData.bid_floor_gen=e.bidFloorGen,this.adData.multiplier=e.multiplier,this.adData.winning_bid_floor=e.videoAdBidFloor,this.adData.max_hb_bid=e.maxHBBid,this.adData.bid_floor_type=e.bidFloorType}},{key:"handleAdImpressionData",value:function(){y("Sending vad.gif");var e=new Image;if(e.src=this.vadStoreURL+"?e="+encodeURIComponent(JSON.stringify(this.adData)),y(e.src),"undefined"!=typeof __ez&&void 0!==__ez.pel){var t=[new __ezDotData("loaded",1)],i=0;void 0!==this.adData.stat_source_id&&(t.push(new __ezDotData("stat_source_id",this.adData.stat_source_id)),i=this.adData.prebid_cpm/1e3),__ez.pel.AddById(this.adData.ad_unit+"//"+this.adData.impression_id,t,__ez.template.isOrig,i),__ez.pel.Fire()}}},{key:"handleAdBounce",value:function(){this.player&&this.player&&this.player.adRenderer&&this.player.adRenderer.adsActive_&&(y("Ad bounce"),this.adPixels.addAdBounce(this.adData.uuid,this.adData))}},{key:"sendUnfilledVadPixel",value:function(e,t){y("UnfilledVadPixel"),this.adData={ad_filled:0,error_message:t},!0===this.isOutstream&&"undefined"==typeof __ezInstream?__ezOutstream.UnfilledCnt++:__ezInstream.UnfilledCnt++,e.impressionId=this.currentAdBreak.impressionId,this.initAdImpression(),this.handleAdBreakData(e),(new Image).src=this.vadStoreURL+"?e="+encodeURIComponent(JSON.stringify(this.adData))}},{key:"attachOutstreamPlayerEvent",value:function(){var e=this;this.player.getEventEmitter().one("ezoPlayerClosed",(function(t){e.adData.closed=!0,e.adPixels.addAdClosed(e.adData.uuid,e.adData)}))}}]),e}(),C=function(){function e(t,i,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;n()(this,e),this.videoPlayer_=t,this.videoAdEventHandler=new w(t,i,s,r),this.adsManager_=a,this.registerAdEventHandlers()}return r()(e,[{key:"registerAdEventHandlers",value:function(){this.adsManager_&&(this.adsManager_.addEventListener(google.ima.AdEvent.Type.AD_PROGRESS,this.videoAdEventHandler.handleAdProgressEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.CLICK,this.videoAdEventHandler.handleClickEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.videoAdEventHandler.handleCompleteEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,this.videoAdEventHandler.handleQuartileEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.LOADED,this.videoAdEventHandler.handleAdLoad,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.LOG,this.videoAdEventHandler.handleLogEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.MIDPOINT,this.videoAdEventHandler.handleQuartileEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.PAUSED,this.videoAdEventHandler.handlePauseEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.RESUMED,this.videoAdEventHandler.handlePlayEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.videoAdEventHandler.handleSkipEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.STARTED,this.videoAdEventHandler.handleInitialTime,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,this.videoAdEventHandler.handleQuartileEvent,!1,this.videoAdEventHandler))}}]),e}(),x=function(){function e(t){n()(this,e),this.vData=t}return r()(e,[{key:"handleInitialPlay",value:function(){var e=this.videoData,t=e.uuid;if(!(this.videoData.play_cnt>0)){var i=0|this.player.getVideoLength();this.generateQuartileData(e,i),this.videoPixels.addStart(t),this.startDate=Date.now()}}},{key:"handleLoadStart",value:function(){this.clearBufferingData()}},{key:"handlePlayEvent",value:function(){this.id,this.videoData.play_cnt++;var e=this.player.player.player;e.muted()||0===e.volume()||(this.videoData.lastUnmuted=new Date)}},{key:"handlePlayingEvent",value:function(){this.playingDate=new Date}},{key:"handlePauseEvent",value:function(){if(this.id,this.videoData.pause_cnt++,this.bufferStart=!1,this.isScrubbing){var e=this;this.timer=setTimeout((function(){e.isScrubbing=!1}),200)}if(this.playingDate){var t=new Date;this.videoData.total_play_time+=t.getTime()-this.playingDate.getTime()}var i=this.player.player.player;i.muted()||0===i.volume()||(this.videoData.total_play_time_unmute+=new Date-this.videoData.lastUnmuted)}},{key:"handleSeekingEvent",value:function(e){this.id,this.isSeeking||(this.isSeeking=!0,this.initialSeekTime=this.player.getCurrentVideoTime())}},{key:"handleSeekedEvent",value:function(e){this.id,this.isSeeking=!1,this.videoData.seek_time+=this.player.getCurrentVideoTime()-this.initialSeekTime}},{key:"handleWaitingEvent",value:function(e){this.id,this.isBuffering,this.isScrubbing,!1===this.isBuffering&&!1===this.isScrubbing&&(this.bufferStart=new Date,this.bufferStart,this.bufferPosition=this.player.getCurrentVideoTime(),this.readyState=this.player.getReadyState())}},{key:"handleCompleteEvent",value:function(){this.id;var e=this.videoData;if(this.clearBufferingData(),!e.completed){var t=e.uuid;e.completed=!0,this.videoPixels.addCompleted(t),e.end&&e.end.played&&!e.end.added&&(e.end.added=!0,this.videoPixels.addViewed(t,"end",e.end.viewed),this.videoPixels.addHeard(t,"end",e.end.heard),this.videoPixels.fire())}}},{key:"handleErrorEvent",value:function(e){this.id,this.videoData.errored||(this.videoData.errored=!0,this.videoPixels.addErrored(this.videoData.uuid))}},{key:"handleRemoveEvent",value:function(){this.id,this.videoData.removed||(this.videoData.removed=!0,this.videoPixels.addRemoved(this.videoData.uuid))}},{key:"handleTimeEvent",value:function(e){if("start"in this.videoData){var t=this.player.getCurrentVideoTime(),i=this.player.getPlayerViewable(),a=!1|(this.player.getPlayerVolume()>=.02&&!this.player.getPlayerMute()),n=this.player.getVideoLength(),s=this.videoData;if(this.bufferStart&&t!==this.bufferPosition){this.bufferEnd=new Date;var r=this.bufferEnd-this.bufferStart;this.bufferStart=!1,this.bufferPosition=!1,this.bufferCount++,1==this.bufferCount&&(s.initialBufferingTime=+r),s.lagTime+=r}t<1?(this.id,s.start.played=!0,s.start.viewed&=i,s.start.heard&=a):s.firstQuartile.time<=t&&t<1+s.firstQuartile.time?(this.id,s.firstQuartile.played=!0,s.firstQuartile.viewed&=i,s.firstQuartile.heard&=a):s.middle.time<=t&&t<1+s.middle.time?(this.id,s.middle.played=!0,s.middle.viewed&=i,s.middle.heard&=a):s.thirdQuartile.time<=t&&t<1+s.thirdQuartile.time?(this.id,s.thirdQuartile.played=!0,s.thirdQuartile.viewed&=i,s.thirdQuartile.heard&=a):n-1<=t&&t<n&&(this.id,s.end.played=!0,s.end.viewed&=i,s.end.heard&=a),!s.start.completed&&t>=1?(this.id,s.start.completed=!0,this.videoPixels.addQuartileData(),this.videoPixels.fire()):!s.firstQuartile.completed&&t>=1+s.firstQuartile.time?(this.id,s.firstQuartile.completed=!0,this.videoPixels.addQuartileData(),this.videoPixels.fire()):!s.middle.completed&&t>=1+s.middle.time?(this.id,s.middle.completed=!0,this.videoPixels.addQuartileData(),this.videoPixels.fire()):!s.thirdQuartile.completed&&t>=1+s.thirdQuartile.time&&(this.id,s.thirdQuartile.completed=!0,this.videoPixels.addQuartileData(),this.videoPixels.fire())}}},{key:"handleAdStarted",value:function(){if(this.bufferStart){this.bufferEnd=new Date;var e=this.bufferEnd-this.bufferStart;this.bufferStart=!1,this.bufferPosition=!1,this.bufferCount++,1==this.bufferCount&&(this.videoData.initialBufferingTime=+e),this.videoData.lagTime+=e}}},{key:"handleFloatPlayerClosed",value:function(){this.videoData.floatPlayerClosed=1,this.startDate&&(this.videoData.floatCloseTime=Date.now()-this.startDate)}},{key:"handleFloatBounce",value:function(){var e=Date.now()-this.startDate;this.startDate&&this.is_floating&&!this.videoData.floatPlayerClosed&&this.player.isCurrentlyFloating()&&e<15e3&&this.videoPixels.addFloatBounce(this.videoData.uuid)}},{key:"handleResolutionChange",value:function(){var e=this.player.player.player;if(e){var t=e.qualityLevels(),i=t[t.selectedIndex];if(i){var a=i.width.toString()+"x"+i.height.toString();this.videoData.resolutionStart||(this.videoData.resolutionStart=a,this.videoData.resolutionMax=a,this.videoData.resolutionPrevWidth=i.width,this.videoData.resolutionMaxWidth=i.width),i.width!=this.videoData.resolutionPrevWidth&&(this.videoData.resolutionPrevWidth=i.width,this.videoData.resolutionLastSelected=a),i.width>this.videoData.resolutionMaxWidth&&(this.videoData.resolutionMaxWidth=i.width,this.videoData.resolutionMax=a)}}}},{key:"handleClickThroughToHumixPageEvent",value:function(){this.videoData.click_to_dedicated_page=1}},{key:"handleSharingEvent",value:function(e){if(e.platform){var t=this.videoData;this.videoData[e.platform]="number"!=typeof t.sharingData[e.platform]?1:t.sharingData[e.platform]++}}},{key:"handleVolumeChangeEvent",value:function(e){var t=this.player.player.player,i=t.muted()||0===t.volume();if(0===t.currentTime())i?(this.videoData.muted=!0,this.videoData.lastUnmuted=void 0):(this.videoData.muted=!1,this.videoData.lastUnmuted=new Date);else{var a=this.videoData.muted;if(!i&&a)this.videoData.unmute=1,this.videoData.video_unmute_start=(new Date).toISOString().substring(0,19).replace("T"," "),this.videoData.lastUnmuted=new Date,this.videoData.muted=!1;else if(i&&!a){this.videoData.muted=!0;var n=this.videoData.lastUnmuted;if(void 0!==n){var s=new Date-n;this.videoData.total_play_time_unmute+=s}}}}},{key:"handleLightsToggle",value:function(e,t){this.videoData.lightsOff||(this.videoData.lightsOff=0),this.videoData.lightsOn||(this.videoData.lightsOn=0),t?this.videoData.lightsOn++:this.videoData.lightsOff++}}]),e}();var z=function(){function e(t){n()(this,e),this.videoData=t}return r()(e,[{key:"addCounts",value:function(){var e=this.videoData,t=e.uuid;if(e.play_cnt>0&&__ez.vep.Add(t,[new __ezDotData("play_cnt",e.play_cnt)]),e.pause_cnt>0&&__ez.vep.Add(t,[new __ezDotData("pause_cnt",e.pause_cnt)]),e.ad_cnt>0&&__ez.vep.Add(t,[new __ezDotData("ad_cnt",e.ad_cnt)]),e.seek_time>0){var i=0|e.seek_time;__ez.vep.Add(t,[new __ezDotData("seek_time",i)])}}},{key:"addBufferData",value:function(){var e=this.videoData,t=e.uuid;e.total_play_time>0&&__ez.vep.Add(t,[new __ezDotData("total_play_time",e.total_play_time)]),e.initialBufferTime>0&&__ez.vep.Add(t,[new __ezDotData("init_buffer_time",e.initialBufferingTime)]),e.lagTime>0&&__ez.vep.Add(t,[new __ezDotData("lag_length",e.lagTime)])}},{key:"addQuartileData",value:function(){var e=this.videoData;if("start"in e){var t=e.uuid;!e.start.added&&e.start.played&&e.start.completed&&(e.start.added=!0,this.addViewed(t,"start",e.start.viewed),this.addHeard(t,"start",e.start.heard)),!e.firstQuartile.added&&e.firstQuartile.played&&e.firstQuartile.completed&&(e.firstQuartile.added=!0,this.addViewed(t,"first_quartile",e.firstQuartile.viewed),this.addHeard(t,"first_quartile",e.firstQuartile.heard)),!e.middle.added&&e.middle.played&&e.middle.completed&&(e.middle.added=!0,this.addViewed(t,"middle",e.middle.viewed),this.addHeard(t,"middle",e.middle.heard)),!e.thirdQuartile.added&&e.thirdQuartile.played&&e.thirdQuartile.completed&&(e.thirdQuartile.added=!0,this.addViewed(t,"third_quartile",e.thirdQuartile.viewed),this.addHeard(t,"third_quartile",e.thirdQuartile.heard))}}},{key:"addFloatPlayerClosed",value:function(){void 0!==this.videoData.floatPlayerClosed&&this.videoData.floatPlayerClosed>0&&(__ez.vep.Add(this.videoData.uuid,[new __ezDotData("float_player_closed",this.videoData.floatPlayerClosed)]),__ez.vep.Add(this.videoData.uuid,[new __ezDotData("float_close_time",this.videoData.floatCloseTime)]))}},{key:"addResolutionData",value:function(){void 0!==this.videoData.resolutionStart&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("resolution_start",this.videoData.resolutionStart)]),void 0!==this.videoData.resolutionMax&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("resolution_max",this.videoData.resolutionMax)]),void 0!==this.videoData.resolutionLastSelected&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("resolution_last_selected",this.videoData.resolutionLastSelected)])}},{key:"addTitleClickData",value:function(){void 0!==this.videoData.click_to_dedicated_page&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("click_to_dedicated_page",this.videoData.click_to_dedicated_page)])}},{key:"addMuteData",value:function(){if(void 0!==this.videoData.unmute&&this.videoData.total_play_time_unmute>0){if(!this.videoData.muted){var e=new Date-this.videoData.lastUnmuted;e>0&&(this.videoData.total_play_time_unmute+=e,this.videoData.lastUnmuted=new Date)}__ez.vep.Add(this.videoData.uuid,[new __ezDotData("unmute",this.videoData.unmute)]),__ez.vep.Add(this.videoData.uuid,[new __ezDotData("video_unmute_start",this.videoData.video_unmute_start)]),__ez.vep.Add(this.videoData.uuid,[new __ezDotData("total_play_time_unmute",this.videoData.total_play_time_unmute)])}}},{key:"addStart",value:function(e){var t=(new Date).toISOString().substring(0,19).replace("T"," ");__ez.vep.Add(e,[new __ezDotData("video_start",t)])}},{key:"addCompleted",value:function(e){__ez.vep.Add(e,[new __ezDotData("completed",1)])}},{key:"addErrored",value:function(e){__ez.vep.Add(e,[new __ezDotData("errored",1)])}},{key:"addRemoved",value:function(e){__ez.vep.Add(e,[new __ezDotData("removed",1)])}},{key:"addViewed",value:function(e,t,i){__ez.vep.Add(e,[new __ezDotData("viewed_"+t,i)])}},{key:"addHeard",value:function(e,t,i){__ez.vep.Add(e,[new __ezDotData("heard_"+t,i)])}},{key:"addClickedLink",value:function(e,t){var i=t.href,a=this.videoData.uuid;__ez.vep.Add(a,[new __ezDotData("clicked_link_s",e)]),i&&__ez.vep.Add(a,[new __ezDotData("clicked_link_url",i)])}},{key:"addSharingData",value:function(){var e=this.videoData,t=e.uuid,i={fbButton:"facebook_shares",pinterest:"pinterest_shares",tw:"twitter_shares",reddit:"reddit_shares",googleplus:"googleplus_shares",messenger:"messenger_shares",linkedin:"linkedin_shares",vk:"vk_shares",ok:"ok_shares",mail:"mail_shares",email:"email_shares",telegram:"telegram_shares",whatsapp:"whatsapp_shares",viber:"viber_shares"};Object.keys(e.sharingData).forEach((function(a){i.hasOwnProperty(a)&&e.sharingData[a]>0&&(i[a],e.sharingData[a],__ez.vep.Add(t,[new __ezDotData(i[a],e.sharingData[a])]))}))}},{key:"addLightsData",value:function(){this.videoData.lightsOn&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("lights_on",this.videoData.lightsOn)]),this.videoData.lightsOff&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("lights_off",this.videoData.lightsOff)])}},{key:"addFloatBounce",value:function(e){__ez.vep.Add(e,[new __ezDotData("float_bounce",1)])}},{key:"fire",value:function(){__ez.vep.Fire()}}]),e}();var L=function(){function e(t,i){n()(this,e),!0===i.Preview||(this.vidStorePath="/detroitchicago/vid.gif",this.vidStoreURL=c()+"/detroitchicago/vid.gif",this.vidErrorURL=c()+"/detroitchicago/ved.gif",this.url=_ezaq.url,this.pageview_id=_ezaq.page_view_id,_ezaq.hasOwnProperty(["visit_uuid"])?this.visit_uuid=_ezaq.visit_uuid:this.visit_uuid=u("ezovuuid_"+_ezaq.domain_id),this.template_id=_ezaq.template_id,this.domain_id=_ezaq.domain_id,this.tech=t.getTech(),"undefined"!=typeof vectx&&(vectx.hasOwnProperty("video_container_impression_id")&&(this.video_container_impression_id=vectx.video_container_impression_id),vectx.hasOwnProperty("embed_is_floating")&&(this.embed_is_floating=vectx.embed_is_floating)),this.eventEmitter=t.getEventEmitter(),this.player=t,this.playerEvents=[],this.videoObject=i,this.setVideoData(i,!0))}return r()(e,[{key:"setVideoData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.videoData;this.videoData=h(),this.videoData.impression_id=e.ImpressionId,this.videoData.ad_unit=e.AdUnit,void 0!==this.player.player.player.ezErrorState&&(this.videoData.uuid,void 0===this.player.player.player.errored&&(this.videoData.uuid,this.videoData.errored=!1)),e&&e.PublisherVideoContentShare&&Object.keys(e.PublisherVideoContentShare).length>0&&v(e.PublisherVideoContentShare)&&(this.owner_domain_id=e.PublisherVideoContentShare.DomainIdOwner),this.humix_channel_id=e.PublisherVideoContentShare.HumixChannelId,this.media_src=this.player.getMediaSource(),this.width=this.player.getVideoDimensions().width,this.height=this.player.getVideoDimensions().height,this.id=this.videoData.uuid,void 0!==this.player.player.player.title&&(this.video_title=this.player.player.player.title),void 0!==this.player.player.player.video_position_id&&(this.video_position_id=this.player.player.player.video_position_id),void 0!==this.player.player.player.is_autoplay&&(this.is_autoplay=this.player.player.player.is_autoplay?1:0),void 0!==this.player.player.player.is_floating&&(this.is_floating=this.player.player.player.is_floating?1:0),void 0!==this.player.player.player.floating_option&&(this.floating_option=this.player.player.player.floating_option),void 0!==this.player.player.player.videos?(this.is_playlist_item=1,this.video_playlist_id=e.VideoPlaylistId,this.video_playlist_index=this.player.player.player.videos.findIndex((function(t){return t.VideoContentId===e.VideoContentId}))):this.is_playlist_item=0,e.videoObjectsCount&&(this.video_objects_count=e.videoObjectsCount),e.videoObjectsIndex&&(this.video_objects_index=e.videoObjectsIndex),e.debugMessage&&(this.extra_message=e.debugMessage),void 0!==this.player.player.player.video_length&&(this.video_length=this.player.player.player.video_length),void 0!==e.VideoSelection&&(this.video_selection_type=e.VideoSelection),e.VideoMatchScore&&(this.video_match_score=e.VideoMatchScore),e.VideoUploadSource&&e.VideoUploadSource.length>0?this.video_source=e.VideoUploadSource:this.video_source="upload",this.videoData.total_play_time_unmute=0,e.CollectionId&&e.ScoreGroupId&&(this.collection_id=e.CollectionId,this.score_group_id=e.ScoreGroupId),void 0!==e.AutoInsertImpressionID&&""!=e.AutoInsertImpressionID&&(this.video_auto_insert_impression_id=e.AutoInsertImpressionID),void 0!==e.embed_ctx&&(void 0!==e.embed_ctx.parent_url&&(this.url=e.embed_ctx.parent_url),void 0!==e.embed_ctx.domain_id&&(this.domain_id=e.embed_ctx.domain_id,this.pageview_id=e.embed_ctx.pageview_id,this.visit_uuid=e.embed_ctx.visit_uuid)),this._ezva=[],this.storeData(),this.generateBufferData(this.videoData),this.is_floating?this.videoData.floatPlayerClosed=i?i.floatPlayerClosed:0:this.videoData.floatPlayerClosed=void 0,this.generateSharingData(this.videoData),this.bufferStart=!1,this.bufferEnd=!1,this.bufferCount=0,this.readyState=!1,this.timer=null,this.isSeeking=!1,this.isScrubbing=!1,this.isBuffering=!1,this.initialSeekTime=0,this.videoPixels=new z(this.videoData),this.videoEvents=new x,t&&this.attachListeners(),this.reattachListeners()}},{key:"attachListeners",value:function(){"HTML5"===this.tech?this.attachHTML5Listeners():"YOUTUBE"===this.tech?this.attachYoutubeListeners():"VIMEO"===this.tech&&this.attachVimeoListeners(),ez_attachEvent(document,"blur",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"beforeunload",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"blur",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"pagehide",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"unload",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"beforeunload",this.bind_(this,this.videoEvents.handleFloatBounce)),this.attachSharingListeners()}},{key:"attachHTML5Listeners",value:function(){var e=this;this.playerEvents=[{name:"play",fn:this.bind_(this,this.videoEvents.handleInitialPlay)},{name:"play",fn:this.bind_(this,this.videoEvents.handlePlayEvent)},{name:"pause",fn:this.bind_(this,this.videoEvents.handlePauseEvent)},{name:"seeking",fn:this.bind_(this,this.videoEvents.handleSeekingEvent)},{name:"seeked",fn:this.bind_(this,this.videoEvents.handleSeekedEvent)},{name:"ended",fn:this.bind_(this,this.videoEvents.handleCompleteEvent)},{name:"error",fn:this.bind_(this,this.videoEvents.handleErrorEvent)},{name:"remove",fn:this.bind_(this,this.videoEvents.handleRemoveEvent)},{name:"timeupdate",fn:this.bind_(this,this.videoEvents.handleTimeEvent)},{name:"waiting",fn:this.bind_(this,this.videoEvents.handleWaitingEvent)},{name:"playing",fn:this.bind_(this,this.videoEvents.handlePlayingEvent)},{name:"ads-ad-started",fn:this.bind_(this,this.videoEvents.handleAdStarted)},{name:"floatPlayerClosed",fn:this.bind_(this,this.videoEvents.handleFloatPlayerClosed)},{name:"resolutionChange",fn:this.bind_(this,this.videoEvents.handleResolutionChange)},{name:"clickThroughToHumixPage",fn:this.bind_(this,this.videoEvents.handleClickThroughToHumixPageEvent)},{name:"volumechange",fn:this.bind_(this,this.videoEvents.handleVolumeChangeEvent)},{name:"lightsToggle",fn:this.bind_(this,this.videoEvents.handleLightsToggle)}],this.playerEvents.forEach((function(t){e.eventEmitter.on(t.name,t.fn)}))}},{key:"attachYoutubeListeners",value:function(){}},{key:"attachVimeoListeners",value:function(){}},{key:"reattachListeners",value:function(){"HTML5"===this.tech?(this.detachHTML5Listeners(),this.attachHTML5Listeners()):"YOUTUBE"===this.tech?(this.detachYoutubeListeners(),this.attachYoutubeListeners()):"VIMEO"===this.tech&&(this.detachVimeoListeners(),this.attachVimeoListeners())}},{key:"detachHTML5Listeners",value:function(){var e=this;this.playerEvents.forEach((function(t){e.eventEmitter.off(t.name,t.fn)}))}},{key:"detachYoutubeListeners",value:function(){}},{key:"detachVimeoListeners",value:function(){}},{key:"attachSharingListeners",value:function(){this.player&&this.player.on(null,"sharingbuttonclicked",this.bind_(this,this.videoEvents.handleSharingEvent))}},{key:"unloadAll",value:function(){this.videoPixels.addCounts(),this.videoPixels.addQuartileData(),this.videoPixels.addBufferData(),this.videoPixels.addFloatPlayerClosed(),this.videoPixels.addResolutionData(),this.videoPixels.addTitleClickData(),this.videoPixels.addSharingData(),this.videoPixels.addLightsData(),this.videoPixels.addMuteData(),this.videoPixels.fire()}},{key:"handleClickLink",value:function(e,t){this.videoPixels.addClickedLink(e,t),this.videoPixels.fire()}},{key:"clearBufferingData",value:function(){this.timer&&clearTimeout(this.timer),this.isScrubbing=!1,this.bufferPosition=!1,this.bufferStart=!1,this.bufferEnd=!1,this.readyState=!1}},{key:"getElementPosition",value:function(e){for(var t={x:0,y:0};e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t.x+=e.offsetLeft-e.scrollLeft,t.y+=e.offsetTop-e.scrollTop,e=e.offsetParent;return t}},{key:"storeData",value:function(){"undefined"!=typeof __ezInstream&&!0===__ezInstream.genericInstream||(this._ezva.push(this.getInitVideoData()),this._ezva.length>0&&(JSON.stringify(this._ezva),(new Image).src=this.vidStoreURL+"?e="+encodeURIComponent(JSON.stringify(this._ezva))))}},{key:"generateBufferData",value:function(e){e.initialBufferingTime=0,e.initialSeekTime=0,e.lagTime=0,e.averageBitRate=0}},{key:"generateSharingData",value:function(e){e.sharingData={fbButton:0,tw:0,reddit:0,linkedin:0,vk:0,email:0,telegram:0,whatsapp:0,pinterest:0}}},{key:"generateQuartileData",value:function(e,t){e.start={},e.start.viewed=!0,e.start.heard=!0,e.start.played=!1,e.start.completed=!1,e.start.added=!1,e.firstQuartile={},e.firstQuartile.time=t/4|0,e.firstQuartile.viewed=!0,e.firstQuartile.heard=!0,e.firstQuartile.played=!1,e.firstQuartile.completed=!1,e.firstQuartile.added=!1,e.middle={},e.middle.time=t/2|0,e.middle.viewed=!0,e.middle.heard=!0,e.middle.played=!1,e.middle.completed=!1,e.middle.added=!1,e.thirdQuartile={},e.thirdQuartile.time=3*t/4|0,e.thirdQuartile.viewed=!0,e.thirdQuartile.heard=!0,e.thirdQuartile.played=!1,e.thirdQuartile.completed=!1,e.thirdQuartile.added=!1,e.end={},e.end.viewed=!0,e.end.heard=!0,e.end.played=!1,e.end.added=!1}},{key:"getInitVideoData",value:function(){var e={};e.domain_id=this.domain_id,void 0!==this.owner_domain_id&&(e.owner_domain_id=this.owner_domain_id),e.humix_channel_id=this.humix_channel_id,e.url=this.url,e.pageview_id=this.pageview_id,e.visit_uuid=this.visit_uuid,e.template_id=this.template_id,e.video_impression_id=this.videoData.uuid,e.media_src=this.media_src,e.player_type=this.player.getPlayerType(),e.video_title=this.video_title,e.video_position_id=this.video_position_id,e.is_autoplay=this.is_autoplay,e.is_floating=this.is_floating,e.floating_option=this.floating_option,e.is_playlist_item=this.is_playlist_item,e.vab_test_id=_ezaq.ab_test_id,void 0!==this.videoObject&&(e.is_preferred=this.videoObject.IsPreferred),this.is_playlist_item&&(e.video_playlist_id=this.video_playlist_id,e.video_playlist_index=this.video_playlist_index),e.video_length=this.video_length,void 0!==this.player.player.player.ezVideoId&&(e.content_id=this.player.player.player.ezVideoId),this.player.player.player.ezVideoImpressionId=e.video_impression_id,this.player.player.player.ezVideoImpressionId,e.width=this.width,e.height=this.height;var t=this.player.getPlayerPosition();return e.pos_x=t.x,e.pos_y=t.y,this.video_objects_count&&(e.video_objects_count=this.video_objects_count),this.video_objects_index&&(e.video_objects_index=this.video_objects_index),this.extra_message&&(e.extra_message=this.extra_message),void 0!==this.video_selection_type&&(e.video_selection_type=this.video_selection_type),void 0!==this.video_match_score&&(e.video_match_score=this.video_match_score),e.is_blocker_on=function(){try{google.ima}catch(e){return!1}return!!__ez.vhb}()?0:1,void 0!==this.video_source&&(e.video_source=this.video_source),void 0!==this.video_container_impression_id&&(e.video_container_impression_id=this.video_container_impression_id),void 0!==this.embed_is_floating&&(e.embed_is_floating=this.embed_is_floating),void 0!==this.score_group_id&&void 0!==this.collection_id&&(e.score_group_id=this.score_group_id,e.collection_id=this.collection_id),void 0!==this.video_auto_insert_impression_id&&(e.video_auto_insert_impression_id=this.video_auto_insert_impression_id),e}},{key:"getVideoImpressionUUID",value:function(){return this.videoData&&this.videoData.uuid?this.videoData.uuid:""}},{key:"bind_",value:function(e,t){return function(){t.apply(e,arguments)}}}]),e}();var T=function(){function e(){n()(this,e),void 0!==afterglow.players&&(this.player=afterglow.getPlayer(afterglow.players[0].id)),this.playerId=afterglow.players[0].id}return r()(e,[{key:"on",value:function(e,t,i){afterglow.on(this.playerId,t,i)}},{key:"off",value:function(e,t,i){afterglow.off(this.playerId,t,i)}},{key:"onTimeUpdate",value:function(e){}},{key:"offTimeUpdate",value:function(e){}},{key:"isFullscreen",value:function(){return!1}},{key:"requestFullscreen",value:function(){}},{key:"exitFullscreen",value:function(){}},{key:"getVideoElement",value:function(){return afterglow.getPlayer(this.playerId).el_}},{key:"getEventEmitter",value:function(){return afterglow.getPlayer(this.playerId)}},{key:"getTech",value:function(){return this.player.techName_.toUpperCase()}},{key:"getPlayer",value:function(){return afterglow.getPlayer(this.playerId)}},{key:"getMediaSource",value:function(){return this.player.src()}},{key:"isMobilePlatform",value:function(){return this.player.paused&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}},{key:"preloadContent",value:function(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.addEventListener("loadedmetadata",e,!1),this.player.load()):e()}},{key:"removePreloadListener",value:function(){this.preloadListener_&&(this.player.removeEventListener("loadedmetadata",this.preloadListener_,!1),this.preloadListener_=null)}},{key:"getVideoLength",value:function(){return this.player.duration()}},{key:"isPlayerAutoplay",value:function(){return this.player.autoplay()}},{key:"getVideoContainer",value:function(){return this.player.el_}},{key:"getPlayerPosition",value:function(){var e={x:-1,y:-1},t=this.getVideoContainer();if(void 0!==t){var i=getElementPosition(t);e.x=i.x,e.y=i.y}return e}},{key:"getVideoDimensions",value:function(){var e={width:-1,height:-1},t=this.getVideoContainer();return e.width=t.width,e.height=t.height,e}},{key:"getPlayerVolume",value:function(){return this.player.volume()}},{key:"setPlayerVolume",value:function(e){}},{key:"getPlayerViewable",value:function(){return!1}},{key:"getCurrentTime",value:function(){return this.player.currentTime()}},{key:"getPlayerMute",value:function(){return this.player.muted()}},{key:"play",value:function(){this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"paused",value:function(){}}]),e}(),M=function(){function e(){n()(this,e),void 0!==flowplayer.Players&&(this.player=flowplayer.Players.instances[0])}return r()(e,[{key:"on",value:function(e,t,i){this.player.on(t,i)}},{key:"off",value:function(e,t,i){this.player.off(t,i)}},{key:"onTimeUpdate",value:function(e){}},{key:"offTimeUpdate",value:function(e){}},{key:"isFullscreen",value:function(){return!1}},{key:"requestFullscreen",value:function(){}},{key:"exitFullscreen",value:function(){}},{key:"getVideoElement",value:function(){return this.player}},{key:"getEventEmitter",value:function(){return this.getVideoElement()}},{key:"getTech",value:function(){return"HTML5"}},{key:"getPlayer",value:function(){return this.player}},{key:"getMediaSource",value:function(){return this.player.currentSrc}},{key:"isMobilePlatform",value:function(){return this.player.paused&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}},{key:"preloadContent",value:function(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.addEventListener("loadedmetadata",e,!1),this.player.load()):e()}},{key:"removePreloadListener",value:function(){this.preloadListener_&&(this.player.removeEventListener("loadedmetadata",this.preloadListener_,!1),this.preloadListener_=null)}},{key:"getVideoLength",value:function(){return this.player.duration}},{key:"isPlayerAutoplay",value:function(){return!1}},{key:"getVideoContainer",value:function(){return this.player}},{key:"getPlayerPosition",value:function(){var e={x:-1,y:-1},t=this.getVideoContainer();if(void 0!==t){var i=getElementPosition(t);e.x=i.x,e.y=i.y}return e}},{key:"getVideoDimensions",value:function(){var e={width:-1,height:-1};return videoContainer=this.getVideoContainer(),e.width=videoContainer.width,e.height=videoContainer.height,e}},{key:"getPlayerVolume",value:function(){return this.player.volume}},{key:"setPlayerVolume",value:function(e){}},{key:"getPlayerViewable",value:function(){return this.player.in_viewport}},{key:"getPlayerMute",value:function(){return this.player.muted}},{key:"play",value:function(){this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"paused",value:function(){}}]),e}(),S=function(){function e(t){n()(this,e),this.player=jwplayer(t)}return r()(e,[{key:"on",value:function(e,t,i){this.player.on(t,i)}},{key:"off",value:function(e,t,i){this.player.off(t,i)}},{key:"onTimeUpdate",value:function(e){}},{key:"offTimeUpdate",value:function(e){}},{key:"isFullscreen",value:function(){return!1}},{key:"requestFullscreen",value:function(){}},{key:"exitFullscreen",value:function(){}},{key:"getVideoElement",value:function(){return this.player}},{key:"getEventEmitter",value:function(){return this.getVideoElement()}},{key:"getTech",value:function(){return this.player.getProvider()}},{key:"getPlayer",value:function(){return this.player}},{key:"getMediaSource",value:function(){return this.player.Playlist.file}},{key:"isMobilePlatform",value:function(){return this.player.paused&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}},{key:"preloadContent",value:function(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.addEventListener("loadedmetadata",e,!1),this.player.load()):e()}},{key:"removePreloadListener",value:function(){this.preloadListener_&&(this.player.removeEventListener("loadedmetadata",this.preloadListener_,!1),this.preloadListener_=null)}},{key:"getVideoLength",value:function(){return this.player.getDuration()}},{key:"isPlayerAutoplay",value:function(){return!1}},{key:"getVideoContainer",value:function(){return this.player}},{key:"getPlayerPosition",value:function(){var e={x:-1,y:-1},t=this.getVideoContainer();if(void 0!==t){var i=getElementPosition(t);e.x=i.x,e.y=i.y}return e}},{key:"getVideoDimensions",value:function(){var e={width:-1,height:-1};return videoContainer=this.getVideoContainer(),e.width=videoContainer.width,e.height=videoContainer.height,e}},{key:"getPlayerVolume",value:function(){return this.player.getVolume()}},{key:"setPlayerVolume",value:function(e){}},{key:"getPlayerViewable",value:function(){return this.player.getViewable()}},{key:"getPlayerMute",value:function(){return this.player.getMute()}},{key:"play",value:function(){this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"paused",value:function(){}}]),e}(),V=function(){function e(t){if(n()(this,e),this.player={},void 0!==t)this.player=t;else{var i=videojs.getAllPlayers();i.length>0&&(this.player=i[0])}}return r()(e,[{key:"on",value:function(e,t,i){this.player.on(t,i)}},{key:"off",value:function(e,t,i){this.player.off(t,i)}},{key:"onTimeUpdate",value:function(e){this.on(null,"timeupdate",e)}},{key:"offTimeUpdate",value:function(e){this.off(null,"timeupdate",e)}},{key:"isFullscreen",value:function(){return this.player.isFullscreen()}},{key:"requestFullscreen",value:function(){this.player.requestFullscreen()}},{key:"exitFullscreen",value:function(){this.player.exitFullscreen()}},{key:"getReadyState",value:function(){return this.player.readyState()}},{key:"getVideoElement",value:function(){return this.player.tech({IWillNotUseThisInPlugins:!0}).el()}},{key:"getEventEmitter",value:function(){return this.player}},{key:"getTech",value:function(){return"HTML5"}},{key:"getPlayer",value:function(){return this.player}},{key:"getMediaSource",value:function(){return this.player.currentSrc()}},{key:"isMobilePlatform",value:function(){return this.player.paused()&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}},{key:"preloadContent",value:function(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.addEventListener("loadedmetadata",e,!1),this.player.load()):e()}},{key:"removePreloadListener",value:function(){this.preloadListener_&&(this.player.removeEventListener("loadedmetadata",this.preloadListener_,!1),this.preloadListener_=null)}},{key:"getVideoLength",value:function(){return this.player.duration()}},{key:"isPlayerAutoplay",value:function(){return this.player.is_autoplay?this.player.is_autoplay:this.player.autoplay()}},{key:"getVideoContainer",value:function(){return this.player.el()}},{key:"getPlayerPosition",value:function(){var e={x:-1,y:-1},t=this.getVideoContainer();if(void 0!==t){var i=getElementPosition(t);e.x=i.x,e.y=i.y}return e}},{key:"getVideoDimensions",value:function(){var e={width:-1,height:-1},t=this.getVideoContainer();return e.width=t.clientWidth,e.height=t.clientHeight,e}},{key:"getPlayerVolume",value:function(){return this.player.volume()}},{key:"setPlayerVolume",value:function(e){this.player.volume(e),0==e?this.player.muted(!0):this.player.muted(!1)}},{key:"getPlayerViewable",value:function(){return!1}},{key:"getPlayerMute",value:function(){return this.player.muted()}},{key:"getCurrentTime",value:function(){return this.player.currentTime()}},{key:"play",value:function(){this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"paused",value:function(){return this.player.paused()}}]),e}(),I=function(){function e(t,i){n()(this,e),this.playerDef=t,this.playerObject=i}return r()(e,[{key:"getPlayer",value:function(){return"afterglow"===this.playerDef?new T:"flowplayer"===this.playerDef?new M:"jwplayer"===this.playerDef?new S(0):"videojs"===this.playerDef||"ezvideojs"===this.playerDef?new V(this.playerObject):void 0}}]),e}(),O=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;n()(this,e),l()(this,"analytics",null),l()(this,"adAnalytics",null),l()(this,"videoContentShare",null),l()(this,"adInitializer",null),l()(this,"adRenderer",null);var a=new I(t,i);this.playerDef=t,this.player=a.getPlayer(),this.videoPlayerContainer_=this.getVideoContainer(),this.dimensions=this.player.getVideoDimensions(),this.preloadListener_=null,this.PlayPromise=null,this.currentTime=0,this.width=this.dimensions.width,this.height=this.dimensions.height}return r()(e,[{key:"bind_",value:function(e,t){return function(){t.apply(e,arguments)}}},{key:"on",value:function(e,t,i){this.player.on(e,t,i)}},{key:"once",value:function(e,t,i){this.player.once(e,t,i)}},{key:"off",value:function(e,t,i){this.player.off(e,t,i)}},{key:"onTimeUpdate",value:function(e){this.player.onTimeUpdate(e)}},{key:"offTimeUpdate",value:function(e){this.player.offTimeUpdate(e)}},{key:"isFullscreen",value:function(){return this.player.isFullscreen()}},{key:"requestFullscreen",value:function(){this.player.requestFullscreen()}},{key:"exitFullscreen",value:function(){this.player.exitFullscreen()}},{key:"toggleFullscreen",value:function(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()}},{key:"getReadyState",value:function(){return this.player.getReadyState()}},{key:"getVideoElement",value:function(){return this.player.getVideoElement()}},{key:"getPlayerFromDef",value:function(){return this.player}},{key:"getEventEmitter",value:function(){return this.player.getEventEmitter()}},{key:"getTech",value:function(){return this.player.getTech()}},{key:"getMediaSource",value:function(){return this.player.getMediaSource()}},{key:"isMobilePlatform",value:function(){return this.player.paused&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}},{key:"getCurrentVideoTime",value:function(){return this.currentTime=this.player.getCurrentTime(),this.currentTime}},{key:"handleAdPause",value:function(e){}},{key:"preloadContent",value:function(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.on(null,"loadedmetadata",e),this.on(null,"adpause",this.bind_(this,this.handleAdPause))):e()}},{key:"removePreloadListener",value:function(){this.preloadListener_&&(this.player.off(null,"loadedmetadata",this.preloadListener_),this.preloadListener_=null)}},{key:"getPlayerType",value:function(){return this.getTech()}},{key:"getVideoLength",value:function(){return this.player.getVideoLength()}},{key:"isPlayerAutoplay",value:function(){return this.player.isPlayerAutoplay()}},{key:"isCurrentlyFloating",value:function(){var e=this.player.getVideoContainer().id.split("-").pop(),t=document.getElementById("floating-placeholder-"+e);return!(!t||!t.style.display)&&"none"!==t.style.display}},{key:"getVideoContainer",value:function(){return this.player.getVideoContainer()}},{key:"getAdContainer",value:function(){return document.getElementById(this.adInitializer.videoAdContainerId)}},{key:"getPlayerPosition",value:function(){var e={x:-1,y:-1},t=this.videoPlayerContainer_;if(void 0!==t){var i=this.getElementPosition(t);e.x=i.x,e.y=i.y}return e}},{key:"getElementPosition",value:function(e){for(var t={x:0,y:0};e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t.x+=e.offsetLeft-e.scrollLeft,t.y+=e.offsetTop-e.scrollTop,e=e.offsetParent;return t}},{key:"getVideoDimensions",value:function(){return this.player.getVideoDimensions()}},{key:"resize",value:function(e,t,i,a,n){this.videoPlayerContainer_.style.position=e,this.videoPlayerContainer_.style.top=t+"px",this.videoPlayerContainer_.style.left=i+"px",this.videoPlayerContainer_.style.width=a+"px",this.videoPlayerContainer_.style.height=n+"px",this.player.style.width=a+"px",this.player.style.height=n+"px"}},{key:"resizeAdContainer",value:function(e,t,i,a,n){this.videoPlayerContainer_=this.getVideoContainer();this.videoPlayerContainer_.getBoundingClientRect();document.getElementById(this.adRenderer.adContainerId).style.width="100%"}},{key:"registerVideoEndedCallback",value:function(e){this.player.on("my-video","ended",e)}},{key:"removeVideoEndedCallback",value:function(e){this.player.off("my-video","ended",e)}},{key:"getPlayerVolume",value:function(){return this.getPlayerMute()?0:this.player.getPlayerVolume()}},{key:"setPlayerVolume",value:function(e){return this.player.setPlayerVolume(e)}},{key:"getPlayerViewable",value:function(){return e=this.player.getVideoElement(),t=50,i=e.getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight,!(Math.floor(100-(i.top>=0?0:i.top)/+-i.height*100)<t||Math.floor(100-(i.bottom-a)/i.height*100)<t);var e,t,i,a}},{key:"getPlayerMute",value:function(){return this.player.getPlayerMute()}},{key:"play",value:function(){return this.PlayPromise=this.player.play(),this.PlayPromise}},{key:"pause",value:function(){this.player.pause()}},{key:"paused",value:function(){return this.player.paused()}},{key:"asyncPause",value:function(){this.player.trigger("asyncpause")}},{key:"getNextAdBreak",value:function(e){if(0!=e.length){for(var t,i,a,n=Math.floor(this.getCurrentVideoTime()),s=-1,r=0;r<e.length;r++)if(void 0===e[r].isTriggered||!0!==e[r].isTriggered){var d=this.getAdBreakTime(e[r]);if(s<d&&(s=d,i=e[r]),d<=n&&!1===e[r].isComplete){a=r,t=e[r];break}}return t||(t=i),{nextBreak:t,idx:a}}}},{key:"getPrevAdBreak",value:function(e){if(0!=e.length){for(var t,i=Math.floor(this.getCurrentVideoTime()),a=0;a<e.length;a++){var n=this.getAdBreakTime(e[a]);if(n==i){t=e[a];break}if(n>i){t=e[a-1];break}}return t||(t=e[e.length-1]),t}}},{key:"getAdBreakTime",value:function(e){var t=e.timeOffsetSeconds;return-1==t&&(t=Math.floor(this.getVideoLength())),t}},{key:"attachAnalytics",value:function(e){return this.analytics=new L(this,e),this.analytics}},{key:"attachAdAnalytics",value:function(e,t,i){return this.adAnalytics=new C(this,e,t,this.videoContentShare,i),this.adAnalytics}},{key:"attachAdRendering",value:function(e,t,i,a,n,s){return this.adInitializer=i,this.adRenderer=new D(this,e,t,i,a,n,s),this.adRenderer}}]),e}();var U=!1;function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new O(e,t)}function R(e,t,i,a){return new d(e,t,i,a)}"undefined"!=typeof ezVideoIframe&&ezVideoIframe&&(U=!0),"undefined"!=typeof isSharedEmbed&&isSharedEmbed&&(U=!1,"undefined"!=typeof vectx&&(vectx.hasOwnProperty("parent_url")&&(_ezaq.player_url=_ezaq.url,_ezaq.url=vectx.parent_url),vectx.hasOwnProperty("domain_id")&&(window._ez_send_requests_outside_humix=!0,_ezaq.domain_id=vectx.domain_id,_ezaq.page_view_id=vectx.pageview_id,_ezaq.visit_uuid=vectx.visit_uuid))),__ez=U?window.parent.__ez:__ez,_ezaq=U?window.parent._ezaq:_ezaq,ez_attachEvent=U?window.parent.ez_attachEvent:ez_attachEvent,ez_detachEvent=U?window.parent.ez_detachEvent:ez_detachEvent,__ezDotData=U?window.parent.__ezDotData:__ezDotData}]);